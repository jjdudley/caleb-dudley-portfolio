"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),o=require("@reach/portal"),n=require("@reach/utils"),r=require("react-focus-lock"),t=require("react-remove-scroll");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("prop-types");var i=a(r);function s(e,o){if(null==e)return{};var n,r,t={},a=Object.keys(e);for(r=0;r<a.length;r++)o.indexOf(n=a[r])>=0||(t[n]=e[n]);return t}var c=n.forwardRefWithAs((function(r,t){var a=r.as,i=void 0===a?"div":a,c=r.isOpen,u=void 0===c||c,d=s(r,["as","isOpen"]);return n.useCheckStyles("dialog"),e.useEffect((function(){u?window.__REACH_DISABLE_TOOLTIPS=!0:window.requestAnimationFrame((function(){window.__REACH_DISABLE_TOOLTIPS=!1}))}),[u]),u?e.createElement(o.Portal,{"data-reach-dialog-wrapper":""},e.createElement(l,Object.assign({ref:t,as:i},d))):null})),l=n.forwardRefWithAs((function(o,r){var a=o.allowPinchZoom,c=o.as,l=void 0===c?"div":c,u=o.dangerouslyBypassFocusLock,d=void 0!==u&&u,f=o.dangerouslyBypassScrollLock,p=void 0!==f&&f,v=o.initialFocusRef,m=o.onClick,w=o.onDismiss,h=void 0===w?n.noop:w,g=o.onKeyDown,y=o.onMouseDown,E=o.unstable_lockFocusAcrossFrames,b=void 0===E||E,k=s(o,["allowPinchZoom","as","dangerouslyBypassFocusLock","dangerouslyBypassScrollLock","initialFocusRef","onClick","onDismiss","onKeyDown","onMouseDown","unstable_lockFocusAcrossFrames"]),A=e.useRef(null),D=e.useRef(null),O=n.useForkedRef(D,r),F=e.useCallback((function(){v&&v.current&&v.current.focus()}),[v]);return e.useEffect((function(){return D.current?(o=[],r=[],t=n.getOwnerDocument(e=D.current),e?(Array.prototype.forEach.call(t.querySelectorAll("body > *"),(function(n){var t,a;if(n!==(null===(t=e.parentNode)||void 0===t||null===(a=t.parentNode)||void 0===a?void 0:a.parentNode)){var i=n.getAttribute("aria-hidden");null!==i&&"false"!==i||(o.push(i),r.push(n),n.setAttribute("aria-hidden","true"))}})),function(){r.forEach((function(e,n){var r=o[n];null===r?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r)}))}):n.noop):void 0;var e,o,r,t}),[]),e.createElement(i.default,{autoFocus:!0,returnFocus:!0,onActivation:F,disabled:d,crossFrame:b},e.createElement(t.RemoveScroll,{allowPinchZoom:a,enabled:!p},e.createElement(l,Object.assign({},k,{ref:O,"data-reach-dialog-overlay":"",onClick:n.wrapEvent(m,(function(e){A.current===e.target&&(e.stopPropagation(),h(e))})),onKeyDown:n.wrapEvent(g,(function(e){"Escape"===e.key&&(e.stopPropagation(),h(e))})),onMouseDown:n.wrapEvent(y,(function(e){A.current=e.target}))}))))})),u=n.forwardRefWithAs((function(o,r){var t=o.as,a=void 0===t?"div":t,i=o.onClick,c=s(o,["as","onClick","onKeyDown"]);return e.createElement(a,Object.assign({"aria-modal":"true",role:"dialog",tabIndex:-1},c,{ref:r,"data-reach-dialog-content":"",onClick:n.wrapEvent(i,(function(e){e.stopPropagation()}))}))})),d=n.forwardRefWithAs((function(o,r){var t=o.allowPinchZoom,a=void 0!==t&&t,i=o.initialFocusRef,l=o.isOpen,d=o.onDismiss,f=void 0===d?n.noop:d,p=s(o,["allowPinchZoom","initialFocusRef","isOpen","onDismiss"]);return e.createElement(c,{allowPinchZoom:a,initialFocusRef:i,isOpen:l,onDismiss:f},e.createElement(u,Object.assign({ref:r},p)))}));exports.Dialog=d,exports.DialogContent=u,exports.DialogOverlay=c,exports.default=d;
//# sourceMappingURL=dialog.cjs.production.min.js.map
