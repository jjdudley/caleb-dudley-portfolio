{"version":3,"file":"dialog.esm.js","sources":["../src/index.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/no-static-element-interactions */\n\n/**\n * Welcome to @reach/dialog!\n *\n * An accessible dialog or \"modal\" window.\n *\n * @see Docs     https://reach.tech/dialog\n * @see Source   https://github.com/reach/reach-ui/tree/main/packages/dialog\n * @see WAI-ARIA https://www.w3.org/TR/wai-aria-practices-1.2/#dialog_modal\n */\n\nimport * as React from \"react\";\nimport { Portal } from \"@reach/portal\";\nimport {\n  forwardRefWithAs,\n  getOwnerDocument,\n  isString,\n  noop,\n  useCheckStyles,\n  useForkedRef,\n  wrapEvent,\n} from \"@reach/utils\";\nimport FocusLock from \"react-focus-lock\";\nimport { RemoveScroll } from \"react-remove-scroll\";\nimport PropTypes from \"prop-types\";\n\nconst overlayPropTypes = {\n  allowPinchZoom: PropTypes.bool,\n  dangerouslyBypassFocusLock: PropTypes.bool,\n  dangerouslyBypassScrollLock: PropTypes.bool,\n  // TODO:\n  initialFocusRef: () => null,\n  onDismiss: PropTypes.func,\n};\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * DialogOverlay\n *\n * Low-level component if you need more control over the styles or rendering of\n * the dialog overlay.\n *\n * Note: You must render a `DialogContent` inside.\n *\n * @see Docs https://reach.tech/dialog#dialogoverlay\n */\nconst DialogOverlay = forwardRefWithAs<DialogOverlayProps, \"div\">(\n  function DialogOverlay(\n    { as: Comp = \"div\", isOpen = true, ...props },\n    forwardedRef\n  ) {\n    useCheckStyles(\"dialog\");\n\n    // We want to ignore the immediate focus of a tooltip so it doesn't pop\n    // up again when the menu closes, only pops up when focus returns again\n    // to the tooltip (like native OS tooltips).\n    React.useEffect(() => {\n      if (isOpen) {\n        // @ts-ignore\n        window.__REACH_DISABLE_TOOLTIPS = true;\n      } else {\n        window.requestAnimationFrame(() => {\n          // Wait a frame so that this doesn't fire before tooltip does\n          // @ts-ignore\n          window.__REACH_DISABLE_TOOLTIPS = false;\n        });\n      }\n    }, [isOpen]);\n\n    return isOpen ? (\n      <Portal data-reach-dialog-wrapper=\"\">\n        <DialogInner ref={forwardedRef} as={Comp} {...props} />\n      </Portal>\n    ) : null;\n  }\n);\n\nif (__DEV__) {\n  DialogOverlay.displayName = \"DialogOverlay\";\n  DialogOverlay.propTypes = {\n    ...overlayPropTypes,\n    isOpen: PropTypes.bool,\n  };\n}\n\ntype DialogOverlayProps = DialogProps & {\n  /**\n   * By default the dialog locks the focus inside it. Normally this is what you\n   * want. This prop is provided so that this feature can be disabled. This,\n   * however, is strongly discouraged.\n   *\n   * The reason it is provided is not to disable the focus lock entirely.\n   * Rather, there are certain situations where you may need more control on how\n   * the focus lock works. This should be complemented by setting up a focus\n   * lock yourself that would allow more flexibility for your specific use case.\n   *\n   * If you do set this prop to `true`, make sure you set up your own\n   * `FocusLock` component. You can likely use\n   * `react-focus-lock`, which is what Reach uses internally by default. It has\n   * various settings to allow more customization, but it takes care of a lot of\n   * hard work that you probably don't want or need to do.\n   *\n   * @see Docs https://reach.tech/dialog#dialogoverlay-dangerouslybypassfocuslock\n   * @see https://github.com/theKashey/react-focus-lock\n   * @see https://github.com/reach/reach-ui/issues/615\n   */\n  dangerouslyBypassFocusLock?: boolean;\n  /**\n   * By default the dialog locks scrolling with `react-remove-scroll`, which\n   * also injecs some styles on the body element to remove the scrollbar while\n   * maintaining its gap to prevent jank when the dialog's open state is\n   * toggled. This is almost always what you want in a dialog, but in some cases\n   * you may have the need to customize this behavior further.\n   *\n   * This prop will disable `react-remove-scroll` and allow you to compose your\n   * own scroll lock component to meet your needs. Like the\n   * `dangerouslyBypassFocusLock` prop, this is generally discouraged and should\n   * only be used if a proper fallback for managing scroll behavior is provided.\n   *\n   * @see Docs https://reach.tech/dialog#dialogoverlay-dangerouslybypassscrolllock\n   * @see https://github.com/theKashey/react-remove-scroll\n   */\n  dangerouslyBypassScrollLock?: boolean;\n};\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * DialogInner\n */\nconst DialogInner = forwardRefWithAs<DialogOverlayProps, \"div\">(\n  function DialogInner(\n    {\n      allowPinchZoom,\n      as: Comp = \"div\",\n      dangerouslyBypassFocusLock = false,\n      dangerouslyBypassScrollLock = false,\n      initialFocusRef,\n      onClick,\n      onDismiss = noop,\n      onKeyDown,\n      onMouseDown,\n      unstable_lockFocusAcrossFrames = true,\n      ...props\n    },\n    forwardedRef\n  ) {\n    const mouseDownTarget = React.useRef<EventTarget | null>(null);\n    const overlayNode = React.useRef<HTMLDivElement | null>(null);\n    const ref = useForkedRef(overlayNode, forwardedRef);\n\n    const activateFocusLock = React.useCallback(() => {\n      if (initialFocusRef && initialFocusRef.current) {\n        initialFocusRef.current.focus();\n      }\n    }, [initialFocusRef]);\n\n    function handleClick(event: React.MouseEvent) {\n      if (mouseDownTarget.current === event.target) {\n        event.stopPropagation();\n        onDismiss(event);\n      }\n    }\n\n    function handleKeyDown(event: React.KeyboardEvent) {\n      if (event.key === \"Escape\") {\n        event.stopPropagation();\n        onDismiss(event);\n      }\n    }\n\n    function handleMouseDown(event: React.MouseEvent) {\n      mouseDownTarget.current = event.target;\n    }\n\n    React.useEffect(() => {\n      return overlayNode.current\n        ? createAriaHider(overlayNode.current)\n        : void null;\n    }, []);\n\n    return (\n      <FocusLock\n        autoFocus\n        returnFocus\n        onActivation={activateFocusLock}\n        disabled={dangerouslyBypassFocusLock}\n        crossFrame={unstable_lockFocusAcrossFrames}\n      >\n        <RemoveScroll\n          allowPinchZoom={allowPinchZoom}\n          enabled={!dangerouslyBypassScrollLock}\n        >\n          <Comp\n            {...props}\n            ref={ref}\n            data-reach-dialog-overlay=\"\"\n            /*\n             * We can ignore the `no-static-element-interactions` warning here\n             * because our overlay is only designed to capture any outside\n             * clicks, not to serve as a clickable element itself.\n             */\n            onClick={wrapEvent(onClick, handleClick)}\n            onKeyDown={wrapEvent(onKeyDown, handleKeyDown)}\n            onMouseDown={wrapEvent(onMouseDown, handleMouseDown)}\n          />\n        </RemoveScroll>\n      </FocusLock>\n    );\n  }\n);\n\nif (__DEV__) {\n  DialogOverlay.displayName = \"DialogOverlay\";\n  DialogOverlay.propTypes = {\n    ...overlayPropTypes,\n  };\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * DialogContent\n *\n * Low-level component if you need more control over the styles or rendering of\n * the dialog content.\n *\n * Note: Must be a child of `DialogOverlay`.\n *\n * Note: You only need to use this when you are also styling `DialogOverlay`,\n * otherwise you can use the high-level `Dialog` component and pass the props\n * to it. Any props passed to `Dialog` component (besides `isOpen` and\n * `onDismiss`) will be spread onto `DialogContent`.\n *\n * @see Docs https://reach.tech/dialog#dialogcontent\n */\nconst DialogContent = forwardRefWithAs<DialogContentProps, \"div\">(\n  function DialogContent(\n    { as: Comp = \"div\", onClick, onKeyDown, ...props },\n    forwardedRef\n  ) {\n    return (\n      <Comp\n        aria-modal=\"true\"\n        role=\"dialog\"\n        tabIndex={-1}\n        {...props}\n        ref={forwardedRef}\n        data-reach-dialog-content=\"\"\n        onClick={wrapEvent(onClick, (event) => {\n          event.stopPropagation();\n        })}\n      />\n    );\n  }\n);\n\n/**\n * @see Docs https://reach.tech/dialog#dialogcontent-props\n */\ntype DialogContentProps = {\n  /**\n   * Accepts any renderable content.\n   *\n   * @see Docs https://reach.tech/dialog#dialogcontent-children\n   */\n  children?: React.ReactNode;\n};\n\nif (__DEV__) {\n  DialogContent.displayName = \"DialogContent\";\n  DialogContent.propTypes = {\n    \"aria-label\": ariaLabelType,\n    \"aria-labelledby\": ariaLabelType,\n  };\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Dialog\n *\n * High-level component to render a modal dialog window over the top of the page\n * (or another dialog).\n *\n * @see Docs https://reach.tech/dialog#dialog\n */\nconst Dialog = forwardRefWithAs<DialogProps, \"div\">(function Dialog(\n  {\n    allowPinchZoom = false,\n    initialFocusRef,\n    isOpen,\n    onDismiss = noop,\n    ...props\n  },\n  forwardedRef\n) {\n  return (\n    <DialogOverlay\n      allowPinchZoom={allowPinchZoom}\n      initialFocusRef={initialFocusRef}\n      isOpen={isOpen}\n      onDismiss={onDismiss}\n    >\n      <DialogContent ref={forwardedRef} {...props} />\n    </DialogOverlay>\n  );\n});\n\n/**\n * @see Docs https://reach.tech/dialog#dialog-props\n */\ntype DialogProps = {\n  /**\n   * Handle zoom/pinch gestures on iOS devices when scroll locking is enabled.\n   * Defaults to `false`.\n   *\n   * @see Docs https://reach.tech/dialog#dialog-allowpinchzoom\n   */\n  allowPinchZoom?: boolean;\n  /**\n   * Accepts any renderable content.\n   *\n   * @see Docs https://reach.tech/dialog#dialog-children\n   */\n  children?: React.ReactNode;\n\n  /**\n   * By default the first focusable element will receive focus when the dialog\n   * opens but you can provide a ref to focus instead.\n   *\n   * @see Docs https://reach.tech/dialog#dialog-initialfocusref\n   */\n  initialFocusRef?: React.RefObject<any>;\n  /**\n   * Controls whether or not the dialog is open.\n   *\n   * @see Docs https://reach.tech/dialog#dialog-isopen\n   */\n  isOpen?: boolean;\n  /**\n   * This function is called whenever the user hits \"Escape\" or clicks outside\n   * the dialog. _It's important to close the dialog `onDismiss`_.\n   *\n   * The only time you shouldn't close the dialog on dismiss is when the dialog\n   * requires a choice and none of them are \"cancel\". For example, perhaps two\n   * records need to be merged and the user needs to pick the surviving record.\n   * Neither choice is less destructive than the other, so in these cases you\n   * may want to alert the user they need to a make a choice on dismiss instead\n   * of closing the dialog.\n   *\n   * @see Docs https://reach.tech/dialog#dialog-ondismiss\n   */\n  onDismiss?: (event?: React.SyntheticEvent) => void;\n  /**\n   * By default, React Focus Lock prevents focus from being moved outside of the\n   * locked element even if the thing trying to take focus is in another frame.\n   * Normally this is what you want, as an iframe is typically going to be a\n   * part of your page content. But in some situations, like when using Code\n   * Sandbox, you can't use any of the controls or the editor in the sandbox\n   * while dialog is open because of the focus lock.\n   *\n   * This prop may have some negative side effects and unintended consequences,\n   * and it opens questions about how we might distinguish frames that *should*\n   * steal focus from those that shouldn't. Perhaps it's best for app devs to\n   * decide, and if they use this prop we should advise them to imperatively\n   * assign a -1 tabIndex to other iframes that are a part of the page content\n   * when the dialog is open.\n   *\n   * https://github.com/reach/reach-ui/issues/536\n   */\n  unstable_lockFocusAcrossFrames?: boolean;\n};\n\nif (__DEV__) {\n  Dialog.displayName = \"Dialog\";\n  Dialog.propTypes = {\n    isOpen: PropTypes.bool,\n    onDismiss: PropTypes.func,\n    \"aria-label\": ariaLabelType,\n    \"aria-labelledby\": ariaLabelType,\n  };\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nfunction createAriaHider(dialogNode: HTMLElement) {\n  let originalValues: any[] = [];\n  let rootNodes: HTMLElement[] = [];\n  let ownerDocument = getOwnerDocument(dialogNode)!;\n\n  if (!dialogNode) {\n    if (__DEV__) {\n      console.warn(\n        \"A ref has not yet been attached to a dialog node when attempting to call `createAriaHider`.\"\n      );\n    }\n    return noop;\n  }\n\n  Array.prototype.forEach.call(\n    ownerDocument.querySelectorAll(\"body > *\"),\n    (node) => {\n      const portalNode = dialogNode.parentNode?.parentNode?.parentNode;\n      if (node === portalNode) {\n        return;\n      }\n      let attr = node.getAttribute(\"aria-hidden\");\n      let alreadyHidden = attr !== null && attr !== \"false\";\n      if (alreadyHidden) {\n        return;\n      }\n      originalValues.push(attr);\n      rootNodes.push(node);\n      node.setAttribute(\"aria-hidden\", \"true\");\n    }\n  );\n\n  return () => {\n    rootNodes.forEach((node, index) => {\n      let originalValue = originalValues[index];\n      if (originalValue === null) {\n        node.removeAttribute(\"aria-hidden\");\n      } else {\n        node.setAttribute(\"aria-hidden\", originalValue);\n      }\n    });\n  };\n}\n\nfunction ariaLabelType(\n  props: { [key: string]: any },\n  propName: string,\n  compName: string,\n  location: string,\n  propFullName: string\n) {\n  const details =\n    \"\\nSee https://www.w3.org/TR/wai-aria/#aria-label for details.\";\n  if (!props[\"aria-label\"] && !props[\"aria-labelledby\"]) {\n    return new Error(\n      `A <${compName}> must have either an \\`aria-label\\` or \\`aria-labelledby\\` prop.\n      ${details}`\n    );\n  }\n  if (props[\"aria-label\"] && props[\"aria-labelledby\"]) {\n    return new Error(\n      \"You provided both `aria-label` and `aria-labelledby` props to a <\" +\n        compName +\n        \">. If the a label for this component is visible on the screen, that label's component should be given a unique ID prop, and that ID should be passed as the `aria-labelledby` prop into <\" +\n        compName +\n        \">. If the label cannot be determined programmatically from the content of the element, an alternative label should be provided as the `aria-label` prop, which will be used as an `aria-label` on the HTML tag.\" +\n        details\n    );\n  } else if (props[propName] != null && !isString(props[propName])) {\n    return new Error(\n      `Invalid prop \\`${propName}\\` supplied to \\`${compName}\\`. Expected \\`string\\`, received \\`${\n        Array.isArray(propFullName) ? \"array\" : typeof propFullName\n      }\\`.`\n    );\n  }\n  return null;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// Exports\n\nexport type { DialogContentProps, DialogOverlayProps, DialogProps };\nexport { Dialog, DialogContent, DialogOverlay };\nexport default Dialog;\n"],"names":["overlayPropTypes","allowPinchZoom","PropTypes","bool","dangerouslyBypassFocusLock","dangerouslyBypassScrollLock","initialFocusRef","onDismiss","func","DialogOverlay","forwardRefWithAs","forwardedRef","as","Comp","isOpen","props","useCheckStyles","React","window","__REACH_DISABLE_TOOLTIPS","requestAnimationFrame","Portal","DialogInner","ref","displayName","propTypes","onClick","noop","onKeyDown","onMouseDown","unstable_lockFocusAcrossFrames","mouseDownTarget","overlayNode","useForkedRef","activateFocusLock","current","focus","handleClick","event","target","stopPropagation","handleKeyDown","key","handleMouseDown","createAriaHider","FocusLock","autoFocus","returnFocus","onActivation","disabled","crossFrame","RemoveScroll","enabled","wrapEvent","DialogContent","role","tabIndex","ariaLabelType","Dialog","dialogNode","originalValues","rootNodes","ownerDocument","getOwnerDocument","console","warn","Array","prototype","forEach","call","querySelectorAll","node","portalNode","parentNode","attr","getAttribute","alreadyHidden","push","setAttribute","index","originalValue","removeAttribute","propName","compName","location","propFullName","details","Error","isString","isArray"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,IAAMA,gBAAgB,GAAG;AACvBC,EAAAA,cAAc,EAAEC,SAAS,CAACC,IADH;AAEvBC,EAAAA,0BAA0B,EAAEF,SAAS,CAACC,IAFf;AAGvBE,EAAAA,2BAA2B,EAAEH,SAAS,CAACC,IAHhB;AAIvB;AACAG,EAAAA,eAAe,EAAE;AAAA,WAAM,IAAN;AAAA,GALM;AAMvBC,EAAAA,SAAS,EAAEL,SAAS,CAACM;AANE,CAAzB;;AAWA;;;;;;;;;;;IAUMC,aAAa,gBAAGC,gBAAgB,CACpC,SAASD,aAAT,OAEEE,YAFF;qBACIC;MAAIC,4BAAO;yBAAOC;MAAAA,kCAAS;MAASC;;AAGtCC,EAAAA,cAAc,CAAC,QAAD,CAAd;AAGA;AACA;;AACAC,EAAAA,SAAA,CAAgB;AACd,QAAIH,MAAJ,EAAY;AACV;AACAI,MAAAA,MAAM,CAACC,wBAAP,GAAkC,IAAlC;AACD,KAHD,MAGO;AACLD,MAAAA,MAAM,CAACE,qBAAP,CAA6B;AAC3B;AACA;AACAF,QAAAA,MAAM,CAACC,wBAAP,GAAkC,KAAlC;AACD,OAJD;AAKD;AACF,GAXD,EAWG,CAACL,MAAD,CAXH;AAaA,SAAOA,MAAM,GACXG,aAAA,CAACI,MAAD;iCAAkC;GAAlC,EACEJ,aAAA,CAACK,WAAD;AAAaC,IAAAA,GAAG,EAAEZ;AAAcC,IAAAA,EAAE,EAAEC;KAAUE,MAA9C,CADF,CADW,GAIT,IAJJ;AAKD,CA5BmC;;AA+BtC,2CAAa;AACXN,EAAAA,aAAa,CAACe,WAAd,GAA4B,eAA5B;AACAf,EAAAA,aAAa,CAACgB,SAAd,6BACKzB,gBADL;AAEEc,IAAAA,MAAM,EAAEZ,SAAS,CAACC;AAFpB;AAID;;AA4CD;;;;;AAGA,IAAMmB,WAAW,gBAAGZ,gBAAgB,CAClC,SAASY,WAAT,QAcEX,YAdF;MAEIV,uBAAAA;uBACAW;MAAIC,6BAAO;oCACXT;MAAAA,gEAA6B;qCAC7BC;MAAAA,kEAA8B;MAC9BC,wBAAAA;MACAoB,gBAAAA;8BACAnB;MAAAA,yCAAYoB;MACZC,kBAAAA;MACAC,oBAAAA;oCACAC;MAAAA,oEAAiC;MAC9Bf;;AAIL,MAAMgB,eAAe,GAAGd,MAAA,CAAiC,IAAjC,CAAxB;AACA,MAAMe,WAAW,GAAGf,MAAA,CAAoC,IAApC,CAApB;AACA,MAAMM,GAAG,GAAGU,YAAY,CAACD,WAAD,EAAcrB,YAAd,CAAxB;AAEA,MAAMuB,iBAAiB,GAAGjB,WAAA,CAAkB;AAC1C,QAAIX,eAAe,IAAIA,eAAe,CAAC6B,OAAvC,EAAgD;AAC9C7B,MAAAA,eAAe,CAAC6B,OAAhB,CAAwBC,KAAxB;AACD;AACF,GAJyB,EAIvB,CAAC9B,eAAD,CAJuB,CAA1B;;AAMA,WAAS+B,WAAT,CAAqBC,KAArB;AACE,QAAIP,eAAe,CAACI,OAAhB,KAA4BG,KAAK,CAACC,MAAtC,EAA8C;AAC5CD,MAAAA,KAAK,CAACE,eAAN;AACAjC,MAAAA,SAAS,CAAC+B,KAAD,CAAT;AACD;AACF;;AAED,WAASG,aAAT,CAAuBH,KAAvB;AACE,QAAIA,KAAK,CAACI,GAAN,KAAc,QAAlB,EAA4B;AAC1BJ,MAAAA,KAAK,CAACE,eAAN;AACAjC,MAAAA,SAAS,CAAC+B,KAAD,CAAT;AACD;AACF;;AAED,WAASK,eAAT,CAAyBL,KAAzB;AACEP,IAAAA,eAAe,CAACI,OAAhB,GAA0BG,KAAK,CAACC,MAAhC;AACD;;AAEDtB,EAAAA,SAAA,CAAgB;AACd,WAAOe,WAAW,CAACG,OAAZ,GACHS,eAAe,CAACZ,WAAW,CAACG,OAAb,CADZ,GAEH,KAAK,IAFT;AAGD,GAJD,EAIG,EAJH;AAMA,SACElB,aAAA,CAAC4B,SAAD;AACEC,IAAAA,SAAS;AACTC,IAAAA,WAAW;AACXC,IAAAA,YAAY,EAAEd;AACde,IAAAA,QAAQ,EAAE7C;AACV8C,IAAAA,UAAU,EAAEpB;GALd,EAOEb,aAAA,CAACkC,YAAD;AACElD,IAAAA,cAAc,EAAEA;AAChBmD,IAAAA,OAAO,EAAE,CAAC/C;GAFZ,EAIEY,aAAA,CAACJ,IAAD,oBACME;AACJQ,IAAAA,GAAG,EAAEA;iCACqB;;AAC1B;;;;;AAKAG,IAAAA,OAAO,EAAE2B,SAAS,CAAC3B,OAAD,EAAUW,WAAV;AAClBT,IAAAA,SAAS,EAAEyB,SAAS,CAACzB,SAAD,EAAYa,aAAZ;AACpBZ,IAAAA,WAAW,EAAEwB,SAAS,CAACxB,WAAD,EAAcc,eAAd;IAXxB,CAJF,CAPF,CADF;AA4BD,CA/EiC,CAApC;;AAkFA,2CAAa;AACXlC,EAAAA,aAAa,CAACe,WAAd,GAA4B,eAA5B;AACAf,EAAAA,aAAa,CAACgB,SAAd,6BACKzB,gBADL;AAGD;;AAID;;;;;;;;;;;;;;;;;IAeMsD,aAAa,gBAAG5C,gBAAgB,CACpC,SAAS4C,aAAT,QAEE3C,YAFF;uBACIC;MAAIC,6BAAO;MAAOa,gBAAAA;MAASE,kBAAAA;MAAcb;;AAG3C,SACEE,aAAA,CAACJ,IAAD;kBACa;AACX0C,IAAAA,IAAI,EAAC;AACLC,IAAAA,QAAQ,EAAE,CAAC;KACPzC;AACJQ,IAAAA,GAAG,EAAEZ;iCACqB;AAC1Be,IAAAA,OAAO,EAAE2B,SAAS,CAAC3B,OAAD,EAAU,UAACY,KAAD;AAC1BA,MAAAA,KAAK,CAACE,eAAN;AACD,KAFiB;IAPpB,CADF;AAaD,CAlBmC;;AAiCtC,2CAAa;AACXc,EAAAA,aAAa,CAAC9B,WAAd,GAA4B,eAA5B;AACA8B,EAAAA,aAAa,CAAC7B,SAAd,GAA0B;AACxB,kBAAcgC,aADU;AAExB,uBAAmBA;AAFK,GAA1B;AAID;;AAID;;;;;;;;;;IAQMC,MAAM,gBAAGhD,gBAAgB,CAAqB,SAASgD,MAAT,QAQlD/C,YARkD;mCAEhDV;MAAAA,mDAAiB;MACjBK,wBAAAA;MACAQ,eAAAA;8BACAP;MAAAA,yCAAYoB;MACTZ;;AAIL,SACEE,aAAA,CAACR,aAAD;AACER,IAAAA,cAAc,EAAEA;AAChBK,IAAAA,eAAe,EAAEA;AACjBQ,IAAAA,MAAM,EAAEA;AACRP,IAAAA,SAAS,EAAEA;GAJb,EAMEU,aAAA,CAACqC,aAAD;AAAe/B,IAAAA,GAAG,EAAEZ;KAAkBI,MAAtC,CANF,CADF;AAUD,CApB8B;;AAuF/B,2CAAa;AACX2C,EAAAA,MAAM,CAAClC,WAAP,GAAqB,QAArB;AACAkC,EAAAA,MAAM,CAACjC,SAAP,GAAmB;AACjBX,IAAAA,MAAM,EAAEZ,SAAS,CAACC,IADD;AAEjBI,IAAAA,SAAS,EAAEL,SAAS,CAACM,IAFJ;AAGjB,kBAAciD,aAHG;AAIjB,uBAAmBA;AAJF,GAAnB;AAMD;;;AAID,SAASb,eAAT,CAAyBe,UAAzB;AACE,MAAIC,cAAc,GAAU,EAA5B;AACA,MAAIC,SAAS,GAAkB,EAA/B;AACA,MAAIC,aAAa,GAAGC,gBAAgB,CAACJ,UAAD,CAApC;;AAEA,MAAI,CAACA,UAAL,EAAiB;AACf,+CAAa;AACXK,MAAAA,OAAO,CAACC,IAAR,CACE,6FADF;AAGD;;AACD,WAAOtC,IAAP;AACD;;AAEDuC,EAAAA,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CACEP,aAAa,CAACQ,gBAAd,CAA+B,UAA/B,CADF,EAEE,UAACC,IAAD;;;AACE,QAAMC,UAAU,4BAAGb,UAAU,CAACc,UAAd,oFAAG,sBAAuBA,UAA1B,2DAAG,uBAAmCA,UAAtD;;AACA,QAAIF,IAAI,KAAKC,UAAb,EAAyB;AACvB;AACD;;AACD,QAAIE,IAAI,GAAGH,IAAI,CAACI,YAAL,CAAkB,aAAlB,CAAX;AACA,QAAIC,aAAa,GAAGF,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,OAA9C;;AACA,QAAIE,aAAJ,EAAmB;AACjB;AACD;;AACDhB,IAAAA,cAAc,CAACiB,IAAf,CAAoBH,IAApB;AACAb,IAAAA,SAAS,CAACgB,IAAV,CAAeN,IAAf;AACAA,IAAAA,IAAI,CAACO,YAAL,CAAkB,aAAlB,EAAiC,MAAjC;AACD,GAfH;AAkBA,SAAO;AACLjB,IAAAA,SAAS,CAACO,OAAV,CAAkB,UAACG,IAAD,EAAOQ,KAAP;AAChB,UAAIC,aAAa,GAAGpB,cAAc,CAACmB,KAAD,CAAlC;;AACA,UAAIC,aAAa,KAAK,IAAtB,EAA4B;AAC1BT,QAAAA,IAAI,CAACU,eAAL,CAAqB,aAArB;AACD,OAFD,MAEO;AACLV,QAAAA,IAAI,CAACO,YAAL,CAAkB,aAAlB,EAAiCE,aAAjC;AACD;AACF,KAPD;AAQD,GATD;AAUD;;AAED,SAASvB,aAAT,CACE1C,KADF,EAEEmE,QAFF,EAGEC,QAHF,EAIEC,QAJF,EAKEC,YALF;AAOE,MAAMC,OAAO,GACX,+DADF;;AAEA,MAAI,CAACvE,KAAK,CAAC,YAAD,CAAN,IAAwB,CAACA,KAAK,CAAC,iBAAD,CAAlC,EAAuD;AACrD,WAAO,IAAIwE,KAAJ,SACCJ,QADD,6EAEHG,OAFG,CAAP;AAID;;AACD,MAAIvE,KAAK,CAAC,YAAD,CAAL,IAAuBA,KAAK,CAAC,iBAAD,CAAhC,EAAqD;AACnD,WAAO,IAAIwE,KAAJ,CACL,sEACEJ,QADF,GAEE,2LAFF,GAGEA,QAHF,GAIE,iNAJF,GAKEG,OANG,CAAP;AAQD,GATD,MASO,IAAIvE,KAAK,CAACmE,QAAD,CAAL,IAAmB,IAAnB,IAA2B,CAACM,QAAQ,CAACzE,KAAK,CAACmE,QAAD,CAAN,CAAxC,EAA2D;AAChE,WAAO,IAAIK,KAAJ,oBACaL,QADb,uBACyCC,QADzC,yCAEHjB,KAAK,CAACuB,OAAN,CAAcJ,YAAd,IAA8B,OAA9B,GAAwC,OAAOA,YAF5C,SAAP;AAKD;;AACD,SAAO,IAAP;AACD;;;;;"}